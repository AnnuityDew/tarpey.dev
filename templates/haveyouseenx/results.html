{% extends 'base.html' %}
  
{% block title %} - haveyouseenx{% endblock %}

{% block style %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', path='/haveyouseenx/css/haveyouseenx.css') }}">
{% endblock %}

{% block java %}
<script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
{% endblock %}

{% block header %}haveyouseenx search results{% endblock %}
{% block content %}
<p>
  {% if search_term == '' %}
    You didn't search for a game, so here's the full table.
  {% else %}
    The game you searched for is called {{ search_term }}. Matches are shown below.
  {% endif %}
</p>

<script>
  const fetchSearchData = async () => {
    var searchURL = "/api/haveyouseenx/search?q={{ search_term|safe }}";
    let rawData = await fetch(searchURL);
    //use string literals
    let searchData = await rawData.json();
    return searchData;
  }

  var search = async () => {
    let searchData = await fetchSearchData();
    document.getElementById("search-results").innerHTML = searchData[1]["game_title"];
  }

  search();
</script>


<span id="search-results">
</span>
{% endblock %}